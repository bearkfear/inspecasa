{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _invariant = _interopRequireDefault(require(\"invariant\"));\n\nvar EventTypes = ['url'];\nvar listeners = [];\n\nfunction _validateURL(url) {\n  (0, _invariant.default)(typeof url === 'string', \"Invalid URL: should be a string. Instead found: \" + url);\n  (0, _invariant.default)(url, 'Invalid URL: cannot be empty');\n}\n\nvar Linking = function () {\n  function Linking() {\n    (0, _classCallCheck2.default)(this, Linking);\n  }\n\n  (0, _createClass2.default)(Linking, [{\n    key: \"addEventListener\",\n    value: function addEventListener(type, listener) {\n      (0, _invariant.default)(EventTypes.indexOf(type) !== -1, \"Linking.addEventListener(): \" + type + \" is not a valid event\");\n\n      var nativeListener = function nativeListener(nativeEvent) {\n        return listener({\n          url: window.location.href,\n          nativeEvent: nativeEvent\n        });\n      };\n\n      listeners.push({\n        listener: listener,\n        nativeListener: nativeListener\n      });\n      window.addEventListener('message', nativeListener, false);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(type, listener) {\n      (0, _invariant.default)(EventTypes.indexOf(type) !== -1, \"Linking.removeEventListener(): \" + type + \" is not a valid event.\");\n      var listenerIndex = listeners.findIndex(function (pair) {\n        return pair.listener === listener;\n      });\n      (0, _invariant.default)(listenerIndex !== -1, 'Linking.removeEventListener(): cannot remove an unregistered event listener.');\n      var nativeListener = listeners[listenerIndex].nativeListener;\n      window.removeEventListener('message', nativeListener, false);\n      listeners.splice(listenerIndex, 1);\n    }\n  }, {\n    key: \"canOpenURL\",\n    value: function canOpenURL(url) {\n      return _regenerator.default.async(function canOpenURL$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _validateURL(url);\n\n              return _context.abrupt(\"return\", true);\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"getInitialURL\",\n    value: function getInitialURL() {\n      return _regenerator.default.async(function getInitialURL$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", window.location.href);\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"openURL\",\n    value: function openURL(url) {\n      return _regenerator.default.async(function openURL$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _validateURL(url);\n\n              window.location.href = url;\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }]);\n  return Linking;\n}();\n\nvar _default = new Linking();\n\nexports.default = _default;","map":{"version":3,"sources":["../../src/Linking/LinkingModule.web.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA;;AAIA,IAAM,UAAU,GAAG,CAAC,KAAD,CAAnB;AAEA,IAAM,SAAS,GAAmE,EAAlF;;AAEA,SAAS,YAAT,CAAsB,GAAtB,EAAiC;AAC/B,0BAAU,OAAO,GAAP,KAAe,QAAzB,uDAAsF,GAAtF;AACA,0BAAU,GAAV,EAAe,8BAAf;AACD;;IAGK,O;;;;;;;qCACa,I,EAAa,Q,EAAqB;AACjD,8BACE,UAAU,CAAC,OAAX,CAAmB,IAAnB,MAA6B,CAAC,CADhC,mCAEiC,IAFjC;;AAIA,UAAM,cAAc,GAAsB,SAApC,cAAoC,CAAA,WAAW;AAAA,eACnD,QAAQ,CAAC;AAAE,UAAA,GAAG,EAAE,MAAM,CAAC,QAAP,CAAgB,IAAvB;AAA6B,UAAA,WAAW,EAAX;AAA7B,SAAD,CAD2C;AAAA,OAArD;;AAEA,MAAA,SAAS,CAAC,IAAV,CAAe;AAAE,QAAA,QAAQ,EAAR,QAAF;AAAY,QAAA,cAAc,EAAd;AAAZ,OAAf;AACA,MAAA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,EAAmC,cAAnC,EAAmD,KAAnD;AACD;;;wCAEmB,I,EAAa,Q,EAAqB;AACpD,8BACE,UAAU,CAAC,OAAX,CAAmB,IAAnB,MAA6B,CAAC,CADhC,sCAEoC,IAFpC;AAIA,UAAM,aAAa,GAAG,SAAS,CAAC,SAAV,CAAoB,UAAA,IAAI;AAAA,eAAI,IAAI,CAAC,QAAL,KAAkB,QAAtB;AAAA,OAAxB,CAAtB;AACA,8BACE,aAAa,KAAK,CAAC,CADrB,EAEE,8EAFF;AAIA,UAAM,cAAc,GAAG,SAAS,CAAC,aAAD,CAAT,CAAyB,cAAhD;AACA,MAAA,MAAM,CAAC,mBAAP,CAA2B,SAA3B,EAAsC,cAAtC,EAAsD,KAAtD;AACA,MAAA,SAAS,CAAC,MAAV,CAAiB,aAAjB,EAAgC,CAAhC;AACD;;;+BAEgB,G;;;;;AACf,cAAA,YAAY,CAAC,GAAD,CAAZ;;+CACO,I;;;;;;;;;;;;;;;;gDAIA,MAAM,CAAC,QAAP,CAAgB,I;;;;;;;;;;;4BAGX,G;;;;;AACZ,cAAA,YAAY,CAAC,GAAD,CAAZ;;AACA,cAAA,MAAM,CAAC,QAAP,CAAgB,IAAhB,GAAuB,GAAvB;;;;;;;;;;;;;eAIW,IAAI,OAAJ,E","sourcesContent":["import invariant from 'invariant';\n\nimport { URLListener, NativeURLListener } from './Linking.types';\n\nconst EventTypes = ['url'];\n\nconst listeners: { listener: URLListener; nativeListener: NativeURLListener }[] = [];\n\nfunction _validateURL(url: string): void {\n  invariant(typeof url === 'string', `Invalid URL: should be a string. Instead found: ${url}`);\n  invariant(url, 'Invalid URL: cannot be empty');\n}\n\n// TODO: Bacon: For better parity this should extend EventEmitter like React Native.\nclass Linking {\n  addEventListener(type: 'url', listener: URLListener): void {\n    invariant(\n      EventTypes.indexOf(type) !== -1,\n      `Linking.addEventListener(): ${type} is not a valid event`\n    );\n    const nativeListener: NativeURLListener = nativeEvent =>\n      listener({ url: window.location.href, nativeEvent });\n    listeners.push({ listener, nativeListener });\n    window.addEventListener('message', nativeListener, false);\n  }\n\n  removeEventListener(type: 'url', listener: URLListener): void {\n    invariant(\n      EventTypes.indexOf(type) !== -1,\n      `Linking.removeEventListener(): ${type} is not a valid event.`\n    );\n    const listenerIndex = listeners.findIndex(pair => pair.listener === listener);\n    invariant(\n      listenerIndex !== -1,\n      'Linking.removeEventListener(): cannot remove an unregistered event listener.'\n    );\n    const nativeListener = listeners[listenerIndex].nativeListener;\n    window.removeEventListener('message', nativeListener, false);\n    listeners.splice(listenerIndex, 1);\n  }\n\n  async canOpenURL(url: string): Promise<boolean> {\n    _validateURL(url);\n    return true;\n  }\n\n  async getInitialURL(): Promise<string> {\n    return window.location.href;\n  }\n\n  async openURL(url: string): Promise<void> {\n    _validateURL(url);\n    window.location.href = url;\n  }\n}\n\nexport default new Linking();\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}