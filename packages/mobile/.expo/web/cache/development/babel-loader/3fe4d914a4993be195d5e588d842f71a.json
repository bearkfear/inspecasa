{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.StoreProvider = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _mobx = require(\"mobx\");\n\nvar _mobxPersist = require(\"mobx-persist\");\n\nvar _reactNative = require(\"react-native\");\n\nvar _jsxFileName = \"/Users/enrico/Work/iscas/inspecasa/mobile/src/store/index.tsx\";\n\nvar StoreContext = _react.default.createContext(null);\n\nvar store = (0, _mobx.observable)({\n  user: {\n    uid: null,\n    token: null\n  },\n  setUser: function setUser(user) {\n    store.user = user;\n  }\n});\nvar schema = {\n  user: {\n    type: 'object',\n    schema: {\n      uid: true,\n      token: true\n    }\n  }\n};\nvar hydrate = (0, _mobxPersist.create)({\n  storage: _reactNative.AsyncStorage,\n  jsonify: true\n});\n(0, _mobxPersist.persist)(schema)(store);\nhydrate('store', store).then(function (state) {\n  if (state.user) {\n    console.log(state.user);\n  }\n});\n\nvar StoreProvider = function StoreProvider(_ref) {\n  var children = _ref.children;\n  return _react.default.createElement(StoreContext.Provider, {\n    value: store,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, children);\n};\n\nexports.StoreProvider = StoreProvider;\nvar _default = StoreContext;\nexports.default = _default;","map":{"version":3,"sources":["/Users/enrico/Work/iscas/inspecasa/mobile/src/store/index.tsx"],"names":["StoreContext","React","createContext","store","user","uid","token","setUser","schema","type","hydrate","storage","AsyncStorage","jsonify","then","state","console","log","StoreProvider","children"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;AACA;;;;AAEA,IAAMA,YAAY,GAAGC,eAAMC,aAAN,CAAoB,IAApB,CAArB;;AAGA,IAAMC,KAAK,GAAG,sBAAW;AACvBC,EAAAA,IAAI,EAAE;AACJC,IAAAA,GAAG,EAAE,IADD;AAEJC,IAAAA,KAAK,EAAE;AAFH,GADiB;AAKvBC,EAAAA,OALuB,mBAKfH,IALe,EAKT;AACZD,IAAAA,KAAK,CAACC,IAAN,GAAaA,IAAb;AACD;AAPsB,CAAX,CAAd;AAUA,IAAMI,MAAM,GAAG;AACbJ,EAAAA,IAAI,EAAE;AACJK,IAAAA,IAAI,EAAE,QADF;AAEJD,IAAAA,MAAM,EAAE;AACNH,MAAAA,GAAG,EAAE,IADC;AAENC,MAAAA,KAAK,EAAE;AAFD;AAFJ;AADO,CAAf;AAUA,IAAMI,OAAO,GAAG,yBAAO;AAAEC,EAAAA,OAAO,EAAEC,yBAAX;AAAyBC,EAAAA,OAAO,EAAE;AAAlC,CAAP,CAAhB;AACA,0BAAQL,MAAR,EAAgBL,KAAhB;AACAO,OAAO,CAAC,OAAD,EAAUP,KAAV,CAAP,CAAwBW,IAAxB,CAA6B,UAAAC,KAAK,EAAI;AAEpC,MAAIA,KAAK,CAACX,IAAV,EAAgB;AACdY,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACX,IAAlB;AACD;AAEF,CAND;;AAWO,IAAMc,aAA2B,GAAG,SAA9BA,aAA8B,OAAkB;AAAA,MAAfC,QAAe,QAAfA,QAAe;AAE3D,SACE,6BAAC,YAAD,CAAc,QAAd;AACE,IAAA,KAAK,EAAEhB,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGGgB,QAHH,CADF;AAMD,CARM;;;eASQnB,Y","sourcesContent":["import React from \"react\";\nimport { useLocalStore } from \"mobx-react\";\nimport { observable } from \"mobx\"\nimport { create, persist } from \"mobx-persist\";\nimport { AsyncStorage } from \"react-native\";\n\nconst StoreContext = React.createContext(null);\n\n\nconst store = observable({\n  user: {\n    uid: null,\n    token: null,\n  },\n  setUser(user) {\n    store.user = user;\n  },\n})\n\nconst schema = {\n  user: {\n    type: 'object',\n    schema: {\n      uid: true,\n      token: true\n    }\n  }\n}\n\nconst hydrate = create({ storage: AsyncStorage, jsonify: true });\npersist(schema)(store);\nhydrate('store', store).then(state => {\n\n  if (state.user) { \n    console.log(state.user)\n  }\n  // TODO: Verificar se a auth token ainda Ã© valida, caso nao, reautenticar\n})\n\n\n\n\nexport const StoreProvider: React.FC<{}> = ({ children }) => {\n\n  return (\n    <StoreContext.Provider\n      value={store}\n    >\n      {children}\n    </StoreContext.Provider>)\n}\nexport default StoreContext;"]},"metadata":{},"sourceType":"script"}