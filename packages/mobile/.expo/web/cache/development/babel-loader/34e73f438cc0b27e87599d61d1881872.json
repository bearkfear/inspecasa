{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.StoreProvider = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _mobx = require(\"mobx\");\n\nvar _mobxPersist = require(\"mobx-persist\");\n\nvar _reactNative = require(\"react-native\");\n\nvar _jsxFileName = \"/Users/enrico/Work/iscas/inspecasa/mobile/src/store/index.tsx\";\n\nvar StoreContext = _react.default.createContext(null);\n\nvar store = (0, _mobx.observable)({\n  user: {\n    isAuth: false,\n    uid: null,\n    token: null\n  },\n  setUser: function setUser(user) {\n    store.user = user;\n  }\n});\nvar schema = {\n  user: {\n    type: 'object',\n    schema: {\n      isAuth: true,\n      uid: true,\n      token: true\n    }\n  }\n};\nvar hydrate = (0, _mobxPersist.create)({\n  storage: _reactNative.AsyncStorage,\n  jsonify: true\n});\n(0, _mobxPersist.persist)(schema)(store);\nhydrate('store', store).then(function (state) {\n  if (state.user) {\n    console.log(state.user);\n  }\n});\n\nvar StoreProvider = function StoreProvider(_ref) {\n  var children = _ref.children;\n  return _react.default.createElement(StoreContext.Provider, {\n    value: store,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, children);\n};\n\nexports.StoreProvider = StoreProvider;\nvar _default = StoreContext;\nexports.default = _default;","map":{"version":3,"sources":["/Users/enrico/Work/iscas/inspecasa/mobile/src/store/index.tsx"],"names":["StoreContext","React","createContext","store","user","isAuth","uid","token","setUser","schema","type","hydrate","storage","AsyncStorage","jsonify","then","state","console","log","StoreProvider","children"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;AACA;;;;AAEA,IAAMA,YAAY,GAAGC,eAAMC,aAAN,CAAoB,IAApB,CAArB;;AAGA,IAAMC,KAAK,GAAG,sBAAW;AACvBC,EAAAA,IAAI,EAAE;AACJC,IAAAA,MAAM,EAAE,KADJ;AAEJC,IAAAA,GAAG,EAAE,IAFD;AAGJC,IAAAA,KAAK,EAAE;AAHH,GADiB;AAMvBC,EAAAA,OANuB,mBAMfJ,IANe,EAMT;AACZD,IAAAA,KAAK,CAACC,IAAN,GAAaA,IAAb;AACD;AARsB,CAAX,CAAd;AAWA,IAAMK,MAAM,GAAG;AACbL,EAAAA,IAAI,EAAE;AACJM,IAAAA,IAAI,EAAE,QADF;AAEJD,IAAAA,MAAM,EAAE;AACNJ,MAAAA,MAAM,EAAE,IADF;AAENC,MAAAA,GAAG,EAAE,IAFC;AAGNC,MAAAA,KAAK,EAAE;AAHD;AAFJ;AADO,CAAf;AAWA,IAAMI,OAAO,GAAG,yBAAO;AAAEC,EAAAA,OAAO,EAAEC,yBAAX;AAAyBC,EAAAA,OAAO,EAAE;AAAlC,CAAP,CAAhB;AACA,0BAAQL,MAAR,EAAgBN,KAAhB;AACAQ,OAAO,CAAC,OAAD,EAAUR,KAAV,CAAP,CAAwBY,IAAxB,CAA6B,UAAAC,KAAK,EAAI;AAEpC,MAAIA,KAAK,CAACZ,IAAV,EAAgB;AACda,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACZ,IAAlB;AACD;AAEF,CAND;;AAWO,IAAMe,aAA2B,GAAG,SAA9BA,aAA8B,OAAkB;AAAA,MAAfC,QAAe,QAAfA,QAAe;AAE3D,SACE,6BAAC,YAAD,CAAc,QAAd;AACE,IAAA,KAAK,EAAEjB,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGGiB,QAHH,CADF;AAMD,CARM;;;eASQpB,Y","sourcesContent":["import React from \"react\";\nimport { useLocalStore } from \"mobx-react\";\nimport { observable } from \"mobx\"\nimport { create, persist } from \"mobx-persist\";\nimport { AsyncStorage } from \"react-native\";\n\nconst StoreContext = React.createContext(null);\n\n\nconst store = observable({\n  user: {\n    isAuth: false,\n    uid: null,\n    token: null,\n  },\n  setUser(user) {\n    store.user = user;\n  },\n})\n\nconst schema = {\n  user: {\n    type: 'object',\n    schema: {\n      isAuth: true,\n      uid: true,\n      token: true\n    }\n  }\n}\n\nconst hydrate = create({ storage: AsyncStorage, jsonify: true });\npersist(schema)(store);\nhydrate('store', store).then(state => {\n\n  if (state.user) { \n    console.log(state.user)\n  }\n  // TODO: Verificar se a auth token ainda Ã© valida, caso nao, reautenticar\n})\n\n\n\n\nexport const StoreProvider: React.FC<{}> = ({ children }) => {\n\n  return (\n    <StoreContext.Provider\n      value={store}\n    >\n      {children}\n    </StoreContext.Provider>)\n}\nexport default StoreContext;"]},"metadata":{},"sourceType":"script"}